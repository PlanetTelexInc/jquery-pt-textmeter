/* Copyright (c) 2015 Planet Telex Inc. all rights reserved. Licence: http://www.apache.org/licenses/LICENSE-2.0 */
!function (n) { n.fn.textmeter = function (e, t) { function i(i, r) { i = n(i); var c = i.val().length; null != t.ignoreRegex && t.ignoreRegex.test(i.val()) && (c = i.val().replace(t.ignoreRegex, "").length + t.ignoreReplacementSize), c > e && t.pulse && !a && o(r, !0), t.delay > 0 ? (s && window.clearTimeout(s), s = window.setTimeout(function () { r.html(t.format.replace("{n}", e - c)) }, t.delay)) : r.html(t.format.replace("{n}", e - c)) } function o(e, t) { a && (window.clearTimeout(a), a = null), e.animate({ opacity: .1 }, 100, function () { n(this).animate({ opacity: 1 }, 100) }), t && (a = window.setTimeout(function () { o(e) }, 200)) } e = e || 140, t = n.extend({ container: "<span></span>", className: "textmeter", format: "<br/>Characters left: <strong>{n}</strong>", pulse: !0, delay: 0, ignoreRegex: null, ignoreReplacementSize: 0 }, t); var a, s; return this.each(function () { var e = t.container.match(/^<.+>$/) ? n(t.container).insertAfter(this).addClass(t.className) : n(t.container); n(this).bind("keydown", function () { i(this, e) }).bind("keypress", function () { i(this, e) }).bind("keyup", function () { i(this, e) }).bind("focus", function () { i(this, e) }).bind("mouseover", function () { i(this, e) }).bind("mouseout", function () { i(this, e) }).bind("paste", function () { var n = this; setTimeout(function () { i(n, e) }, 10) }), this.addEventListener && this.addEventListener("input", function () { i(this, e) }, !1), i(this, e) }) } }(jQuery);